<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Tutorial 10: Forecast Combination | Forecasting With Time Series Models Using R" />
<meta property="og:type" content="book" />
<meta property="og:image" content="/forecasting-logo.png" />
<meta property="og:description" content="Tutorial 10: Forecast Combination | Forecasting With Time Series Models Using R" />


<meta name="author" content="David Ubilava" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="Tutorial 10: Forecast Combination | Forecasting With Time Series Models Using R">

<title>Tutorial 10: Forecast Combination | Forecasting With Time Series Models Using R</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<link href="libs/msmb-css-0/msmb.css" rel="stylesheet" />
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);

e.style.display = ((e.style.display!='none') ? 'none' : 'block');

if(f.classList.contains('fa-plus-square')) {
    f.classList.add('fa-minus-square')
    f.classList.remove('fa-plus-square')
} else {
    f.classList.add('fa-plus-square')
    f.classList.remove('fa-minus-square')
}

}
</script>
<script>
function copy_link(id) {
  var dummy = document.createElement('input'),
  text = window.location.href.split(/[?#]/)[0] + '#' + id;
  document.body.appendChild(dummy);
  dummy.value = text;
  dummy.select();
  document.execCommand('copy');
  document.body.removeChild(dummy);
  
  var tooltip = document.getElementById(id + '-tooltip');
  tooltip.innerHTML = 'Copied!';
}

function reset_tooltip(id) {
  var tooltip = document.getElementById(id);
  tooltip.innerHTML = 'Copy link';
}
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }

code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul class="navbar">
<li class="msmb"><p class="title">Forecasting With Time Series Models Using R<p><p class="author">David Ubilava</p>
<li class="dropdown" style="float:right">
<a href="javascript:void(0)" class="dropbtn">&#x25BE; Chapters</a>
<div class="dropdown-content">
<a href="index.html" id="toc-foreword">Foreword</a>
<a href="forecasting-with-time-series-models.html" id="toc-forecasting-with-time-series-models">Forecasting With Time Series Models</a>
<a href="introduction-to-forecasting.html" id="toc-introduction-to-forecasting"><span class="toc-section-number">1</span> Introduction to Forecasting</a>
<a href="features-of-time-series-data.html" id="toc-features-of-time-series-data"><span class="toc-section-number">2</span> Features of Time Series Data</a>
<a href="forecasting-methods-and-routines.html" id="toc-forecasting-methods-and-routines"><span class="toc-section-number">3</span> Forecasting Methods and Routines</a>
<a href="trends-and-seasonality.html" id="toc-trends-and-seasonality"><span class="toc-section-number">4</span> Trends and Seasonality</a>
<a href="autoregressive-models.html" id="toc-autoregressive-models"><span class="toc-section-number">5</span> Autoregressive Models</a>
<a href="vector-autoregressive-models.html" id="toc-vector-autoregressive-models"><span class="toc-section-number">6</span> Vector Autoregressive Models</a>
<a href="dynamic-factor-models.html" id="toc-dynamic-factor-models"><span class="toc-section-number">7</span> Dynamic Factor Models</a>
<a href="threshold-autoregressive-models.html" id="toc-threshold-autoregressive-models"><span class="toc-section-number">8</span> Threshold Autoregressive Models</a>
<a href="forecast-evaluation.html" id="toc-forecast-evaluation"><span class="toc-section-number">9</span> Forecast Evaluation</a>
<a href="forecast-combination.html" id="toc-forecast-combination"><span class="toc-section-number">10</span> Forecast Combination</a>
<a href="forecasting-using-r.html" id="toc-forecasting-using-r">Forecasting Using R</a>
<a href="tutorial-1-introduction-to-r.html" id="toc-tutorial-1-introduction-to-r">Tutorial 1: Introduction to R</a>
<a href="tutorial-2-data-management.html" id="toc-tutorial-2-data-management">Tutorial 2: Data Management</a>
<a href="tutorial-3-forecasting-methods-and-routines.html" id="toc-tutorial-3-forecasting-methods-and-routines">Tutorial 3: Forecasting Methods and Routines</a>
<a href="tutorial-4-trends-and-seasonality.html" id="toc-tutorial-4-trends-and-seasonality">Tutorial 4: Trends and Seasonality</a>
<a href="tutorial-5-autoregressive-models.html" id="toc-tutorial-5-autoregressive-models">Tutorial 5: Autoregressive Models</a>
<a href="tutorial-6-vector-autoregressive-models.html" id="toc-tutorial-6-vector-autoregressive-models">Tutorial 6: Vector Autoregressive Models</a>
<a href="tutorial-7-dynamic-factor-models.html" id="toc-tutorial-7-dynamic-factor-models">Tutorial 7: Dynamic Factor Models</a>
<a href="tutorial-8-threshold-autoregression.html" id="toc-tutorial-8-threshold-autoregression">Tutorial 8: Threshold Autoregression</a>
<a href="tutorial-9-forecast-evaluation.html" id="toc-tutorial-9-forecast-evaluation">Tutorial 9: Forecast Evaluation</a>
<a id="active-page" href="tutorial-10-forecast-combination.html" id="toc-tutorial-10-forecast-combination">Tutorial 10: Forecast Combination</a>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="tutorial-10-forecast-combination" class="section level1 unnumbered">
<h1>Tutorial 10: Forecast Combination</h1>
<p>(this is a combination stuff, will need to move back)</p>
<p>In this tutorial, we will generate a time series, we will obtain one-step-ahead forecasts from a set of models using a rolling window procedure, we will combine these forecasts and assess the accuracy of the combined forecast. To run the code, the <code>data.table</code>, <code>ggplot2</code>, <code>lmtest</code>, and <code>sandwich</code> packages need to be installed and loaded.</p>
<p>Let’s generate a time series that follow an AR(2) process with the quadratic trend component as follows:
<span class="math display">\[y_t = 0.03t-0.0001t^2+0.6y_{t-1}+0.2y_{t-2}+\varepsilon_t\]</span>
where <span class="math inline">\(e_{t} \sim N(0,\sigma^2)\)</span>.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="tutorial-10-forecast-combination.html#cb177-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">240</span></span>
<span id="cb177-2"><a href="tutorial-10-forecast-combination.html#cb177-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-3"><a href="tutorial-10-forecast-combination.html#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">4</span>)</span>
<span id="cb177-4"><a href="tutorial-10-forecast-combination.html#cb177-4" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb177-5"><a href="tutorial-10-forecast-combination.html#cb177-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-6"><a href="tutorial-10-forecast-combination.html#cb177-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>,n)</span>
<span id="cb177-7"><a href="tutorial-10-forecast-combination.html#cb177-7" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fl">0.03</span><span class="sc">*</span><span class="dv">1</span><span class="fl">-0.0001</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">^</span><span class="dv">2</span>)<span class="sc">+</span>e[<span class="dv">1</span>]</span>
<span id="cb177-8"><a href="tutorial-10-forecast-combination.html#cb177-8" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fl">0.03</span><span class="sc">*</span><span class="dv">2</span><span class="fl">-0.0001</span><span class="sc">*</span>(<span class="dv">2</span><span class="sc">^</span><span class="dv">2</span>)<span class="sc">+</span><span class="fl">0.6</span><span class="sc">*</span>y[<span class="dv">1</span>]<span class="sc">+</span>e[<span class="dv">2</span>]</span>
<span id="cb177-9"><a href="tutorial-10-forecast-combination.html#cb177-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span>n){</span>
<span id="cb177-10"><a href="tutorial-10-forecast-combination.html#cb177-10" aria-hidden="true" tabindex="-1"></a>  y[i] <span class="ot">&lt;-</span> <span class="fl">0.03</span><span class="sc">*</span>i<span class="fl">-0.0001</span><span class="sc">*</span>(i<span class="sc">^</span><span class="dv">2</span>)<span class="sc">+</span><span class="fl">0.6</span><span class="sc">*</span>y[i<span class="dv">-1</span>]<span class="sc">+</span><span class="fl">0.2</span><span class="sc">*</span>y[i<span class="dv">-2</span>]<span class="sc">+</span>e[i]</span>
<span id="cb177-11"><a href="tutorial-10-forecast-combination.html#cb177-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Generate a vector of some arbitrary dates (e.g., suppose we deal with the monthly series beginning from January 2000), store these along with <span class="math inline">\(y\)</span> in a <strong>data.table</strong>, call it ‘dt’, and plot the realized time series using <strong>ggplot</strong> function.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="tutorial-10-forecast-combination.html#cb178-1" aria-hidden="true" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2000-01-01"</span>),<span class="at">by=</span><span class="st">"month"</span>,<span class="at">along.with=</span>y)</span>
<span id="cb178-2"><a href="tutorial-10-forecast-combination.html#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="tutorial-10-forecast-combination.html#cb178-3" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(date,y)</span>
<span id="cb178-4"><a href="tutorial-10-forecast-combination.html#cb178-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-5"><a href="tutorial-10-forecast-combination.html#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt,<span class="fu">aes</span>(<span class="at">x=</span>date,<span class="at">y=</span>y))<span class="sc">+</span></span>
<span id="cb178-6"><a href="tutorial-10-forecast-combination.html#cb178-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb178-7"><a href="tutorial-10-forecast-combination.html#cb178-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Year"</span>,<span class="at">y=</span><span class="st">"Series"</span>)<span class="sc">+</span></span>
<span id="cb178-8"><a href="tutorial-10-forecast-combination.html#cb178-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="forecasting_files/figure-html/unnamed-chunk-102-1.png" width="624"></p>
<p>Suppose the candidate models are AR(1), AR(2), and a linear trend model, and that we want to compare forecasts obtained from these models to those from a random walk process. Generate a sequence of one-step-ahead forecasts using the rolling window scheme, where the first rolling window ranges from period 1 to period 180.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="tutorial-10-forecast-combination.html#cb179-1" aria-hidden="true" tabindex="-1"></a>dt[,<span class="st">`</span><span class="at">:=</span><span class="st">`</span>(<span class="at">y1=</span><span class="fu">shift</span>(y,<span class="dv">1</span>),<span class="at">y2=</span><span class="fu">shift</span>(y,<span class="dv">2</span>),<span class="at">y3=</span><span class="fu">shift</span>(y,<span class="dv">3</span>),<span class="at">trend=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dt)))]</span>
<span id="cb179-2"><a href="tutorial-10-forecast-combination.html#cb179-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-3"><a href="tutorial-10-forecast-combination.html#cb179-3" aria-hidden="true" tabindex="-1"></a>R <span class="ot">&lt;-</span> <span class="dv">180</span></span>
<span id="cb179-4"><a href="tutorial-10-forecast-combination.html#cb179-4" aria-hidden="true" tabindex="-1"></a>P <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dt)<span class="sc">-</span>R</span>
<span id="cb179-5"><a href="tutorial-10-forecast-combination.html#cb179-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-6"><a href="tutorial-10-forecast-combination.html#cb179-6" aria-hidden="true" tabindex="-1"></a>dt[,<span class="st">`</span><span class="at">:=</span><span class="st">`</span>(<span class="at">rw=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>),<span class="at">a1=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>),<span class="at">a2=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>),<span class="at">tr=</span><span class="fu">as.numeric</span>(<span class="cn">NA</span>))]</span>
<span id="cb179-7"><a href="tutorial-10-forecast-combination.html#cb179-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-8"><a href="tutorial-10-forecast-combination.html#cb179-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>P){</span>
<span id="cb179-9"><a href="tutorial-10-forecast-combination.html#cb179-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb179-10"><a href="tutorial-10-forecast-combination.html#cb179-10" aria-hidden="true" tabindex="-1"></a>  dt<span class="sc">$</span>rw[R<span class="sc">+</span>i] <span class="ot">&lt;-</span> dt<span class="sc">$</span>y[R<span class="sc">+</span>i<span class="dv">-1</span>]</span>
<span id="cb179-11"><a href="tutorial-10-forecast-combination.html#cb179-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb179-12"><a href="tutorial-10-forecast-combination.html#cb179-12" aria-hidden="true" tabindex="-1"></a>  a1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y<span class="sc">~</span>y1,<span class="at">data=</span>dt[i<span class="sc">:</span>(R<span class="sc">+</span>i<span class="dv">-1</span>)])</span>
<span id="cb179-13"><a href="tutorial-10-forecast-combination.html#cb179-13" aria-hidden="true" tabindex="-1"></a>  a2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y<span class="sc">~</span>y1<span class="sc">+</span>y2,<span class="at">data=</span>dt[i<span class="sc">:</span>(R<span class="sc">+</span>i<span class="dv">-1</span>)])</span>
<span id="cb179-14"><a href="tutorial-10-forecast-combination.html#cb179-14" aria-hidden="true" tabindex="-1"></a>  tr <span class="ot">&lt;-</span> <span class="fu">lm</span>(y<span class="sc">~</span>y1<span class="sc">+</span>y2<span class="sc">+</span>trend,<span class="at">data=</span>dt[i<span class="sc">:</span>(R<span class="sc">+</span>i<span class="dv">-1</span>)])</span>
<span id="cb179-15"><a href="tutorial-10-forecast-combination.html#cb179-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb179-16"><a href="tutorial-10-forecast-combination.html#cb179-16" aria-hidden="true" tabindex="-1"></a>  dt<span class="sc">$</span>a1[R<span class="sc">+</span>i] <span class="ot">&lt;-</span> a1<span class="sc">$</span>coefficients<span class="sc">%*%</span><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="dv">1</span>,dt[R<span class="sc">+</span>i,<span class="fu">c</span>(<span class="st">"y1"</span>)]))</span>
<span id="cb179-17"><a href="tutorial-10-forecast-combination.html#cb179-17" aria-hidden="true" tabindex="-1"></a>  dt<span class="sc">$</span>a2[R<span class="sc">+</span>i] <span class="ot">&lt;-</span> a2<span class="sc">$</span>coefficients<span class="sc">%*%</span><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="dv">1</span>,dt[R<span class="sc">+</span>i,<span class="fu">c</span>(<span class="st">"y1"</span>,<span class="st">"y2"</span>)]))</span>
<span id="cb179-18"><a href="tutorial-10-forecast-combination.html#cb179-18" aria-hidden="true" tabindex="-1"></a>  dt<span class="sc">$</span>tr[R<span class="sc">+</span>i] <span class="ot">&lt;-</span> tr<span class="sc">$</span>coefficients<span class="sc">%*%</span><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="dv">1</span>,dt[R<span class="sc">+</span>i,<span class="fu">c</span>(<span class="st">"y1"</span>,<span class="st">"y2"</span>,<span class="st">"trend"</span>)]))</span>
<span id="cb179-19"><a href="tutorial-10-forecast-combination.html#cb179-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb179-20"><a href="tutorial-10-forecast-combination.html#cb179-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Does either of the considered models ‘sttaistically significantly’ outperform the random walk?</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="tutorial-10-forecast-combination.html#cb180-1" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>rw_e <span class="ot">&lt;-</span> dt<span class="sc">$</span>y<span class="sc">-</span>dt<span class="sc">$</span>rw</span>
<span id="cb180-2"><a href="tutorial-10-forecast-combination.html#cb180-2" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>a1_e <span class="ot">&lt;-</span> dt<span class="sc">$</span>y<span class="sc">-</span>dt<span class="sc">$</span>a1</span>
<span id="cb180-3"><a href="tutorial-10-forecast-combination.html#cb180-3" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>a2_e <span class="ot">&lt;-</span> dt<span class="sc">$</span>y<span class="sc">-</span>dt<span class="sc">$</span>a2</span>
<span id="cb180-4"><a href="tutorial-10-forecast-combination.html#cb180-4" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>tr_e <span class="ot">&lt;-</span> dt<span class="sc">$</span>y<span class="sc">-</span>dt<span class="sc">$</span>tr</span>
<span id="cb180-5"><a href="tutorial-10-forecast-combination.html#cb180-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-6"><a href="tutorial-10-forecast-combination.html#cb180-6" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>ld1 <span class="ot">&lt;-</span> dt<span class="sc">$</span>rw_e<span class="sc">^</span><span class="dv">2</span><span class="sc">-</span>dt<span class="sc">$</span>a1_e<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb180-7"><a href="tutorial-10-forecast-combination.html#cb180-7" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>ld2 <span class="ot">&lt;-</span> dt<span class="sc">$</span>rw_e<span class="sc">^</span><span class="dv">2</span><span class="sc">-</span>dt<span class="sc">$</span>a2_e<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb180-8"><a href="tutorial-10-forecast-combination.html#cb180-8" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>ldt <span class="ot">&lt;-</span> dt<span class="sc">$</span>rw_e<span class="sc">^</span><span class="dv">2</span><span class="sc">-</span>dt<span class="sc">$</span>tr_e<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb180-9"><a href="tutorial-10-forecast-combination.html#cb180-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-10"><a href="tutorial-10-forecast-combination.html#cb180-10" aria-hidden="true" tabindex="-1"></a>reg.ld1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(ld1<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>dt)</span>
<span id="cb180-11"><a href="tutorial-10-forecast-combination.html#cb180-11" aria-hidden="true" tabindex="-1"></a>reg.ld2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(ld2<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>dt)</span>
<span id="cb180-12"><a href="tutorial-10-forecast-combination.html#cb180-12" aria-hidden="true" tabindex="-1"></a>reg.ldt <span class="ot">&lt;-</span> <span class="fu">lm</span>(ldt<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>dt)</span>
<span id="cb180-13"><a href="tutorial-10-forecast-combination.html#cb180-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-14"><a href="tutorial-10-forecast-combination.html#cb180-14" aria-hidden="true" tabindex="-1"></a><span class="fu">coeftest</span>(reg.ld1,<span class="at">vcov.=</span><span class="fu">vcovHAC</span>(reg.ld1))</span></code></pre></div>
<pre><code>## 
## t test of coefficients:
## 
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept) 0.081204   0.048040  1.6903  0.09624 .
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="tutorial-10-forecast-combination.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coeftest</span>(reg.ld2,<span class="at">vcov.=</span><span class="fu">vcovHAC</span>(reg.ld2))</span></code></pre></div>
<pre><code>## 
## t test of coefficients:
## 
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)  0.32634    0.14912  2.1883  0.03262 *
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="tutorial-10-forecast-combination.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coeftest</span>(reg.ldt,<span class="at">vcov.=</span><span class="fu">vcovHAC</span>(reg.ldt))</span></code></pre></div>
<pre><code>## 
## t test of coefficients:
## 
##             Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept)  0.24461    0.14943  1.6369    0.107</code></pre>
<p>All of the models do, on average, generate more accurate forecasts than random walk. The AR(2) generates statistically significantly more accurate forecasts, based on Diebold-Mariano test applied on quadratic loss function.</p>
<p>Might each model contain some useful information for improving forecast accuracy? Let’s combine the forecasts from the AR(1) and the linear trend model using equal weights scheme and assess the combined forecast.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="tutorial-10-forecast-combination.html#cb186-1" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>t1 <span class="ot">&lt;-</span> dt<span class="sc">$</span>a1<span class="sc">*</span>.<span class="dv">5</span><span class="sc">+</span>dt<span class="sc">$</span>tr<span class="sc">*</span>.<span class="dv">5</span></span>
<span id="cb186-2"><a href="tutorial-10-forecast-combination.html#cb186-2" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>t1_e <span class="ot">&lt;-</span> dt<span class="sc">$</span>y<span class="sc">-</span>dt<span class="sc">$</span>t1</span>
<span id="cb186-3"><a href="tutorial-10-forecast-combination.html#cb186-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-4"><a href="tutorial-10-forecast-combination.html#cb186-4" aria-hidden="true" tabindex="-1"></a>dt<span class="sc">$</span>ldt1 <span class="ot">&lt;-</span> dt<span class="sc">$</span>rw_e<span class="sc">^</span><span class="dv">2</span><span class="sc">-</span>dt<span class="sc">$</span>t1_e<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb186-5"><a href="tutorial-10-forecast-combination.html#cb186-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-6"><a href="tutorial-10-forecast-combination.html#cb186-6" aria-hidden="true" tabindex="-1"></a>reg.ldt1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(ldt1<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>dt)</span>
<span id="cb186-7"><a href="tutorial-10-forecast-combination.html#cb186-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-8"><a href="tutorial-10-forecast-combination.html#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="fu">coeftest</span>(reg.ldt1,<span class="at">vcov.=</span><span class="fu">vcovHAC</span>(reg.ldt1))</span></code></pre></div>
<pre><code>## 
## t test of coefficients:
## 
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept) 0.232926   0.098544  2.3637  0.02141 *
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Hodell, David A, Jason H Curtis, and Mark Brenner. 1995. <span>“<span class="nocase">Possible Role of Climate in the Collapse of Classic Maya Civilization</span>.”</span> <em>Nature</em> 375 (6530): 391–94.
</div>
</div>
</div>
<p style="text-align: center;">
<a href="tutorial-9-forecast-evaluation.html"><button class="btn btn-default">Previous</button></a>
</p>
<p class="build-date">Page built: 
2022-08-04
 using 
R version 4.1.2 (2021-11-01)
</p>
</div>
</div>



</body>
</html>
